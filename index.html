<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoreBox 3.0 - Rust</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
<!-- –§–æ—Ä–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
<div id="authOverlay" class="auth-overlay">
    <div class="auth-container">
        <div class="auth-header">
            <h2>CoreBox 3.0</h2>
            <p>–í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</p>
        </div>
        
        <form id="authForm" class="auth-form">
            <div class="input-group">
                <label for="username">–õ–æ–≥–∏–Ω:</label>
                <input type="text" id="username" name="username" required minlength="3" maxlength="20" placeholder="–º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞">
            </div>
            
            <div class="input-group">
                <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="password" name="password" required minlength="4" placeholder="–º–∏–Ω–∏–º—É–º 4 —Å–∏–º–≤–æ–ª–∞">
            </div>
            
            <div class="auth-buttons">
                <button type="submit" id="loginBtn" class="auth-btn primary">–í–æ–π—Ç–∏</button>
                <button type="button" id="registerBtn" class="auth-btn secondary">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            </div>
        </form>
        
        <div id="authMessage" class="auth-message"></div>
        
        <div class="auth-info">
            <p>–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç</p>
            
            <!-- –°–°–´–õ–ö–ò –ù–ê –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –°–¢–†–ê–ù–ò–¶–´ (–ë–ï–ó target="_blank") -->
            <div class="additional-links">
                <a href="faq.html" class="story-link">
                    üìñ FAQ
                </a>
                <a href="history.html" class="story-link history-link">
                    üé≠ –ò–°–¢–û–†–ò–Ø –ú–ò–†–ê
                </a>
            </div>
        </div>
    </div>
</div>

<!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ –ò–ì–†–´ (–°–ö–†–´–¢ –î–û –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò) -->
<div id="gameContent" style="display: none;">
    <div class="header">
        <h1>CoreBox 3.0</h1>
        
        <div class="user-info" id="userInfo">
            <span id="usernameDisplay"></span>
            <button id="logoutBtn" class="logout-btn">–í—ã–π—Ç–∏</button>
        </div>
        
        <div class="stats-container">
            <div class="stat-card">
                <div>–¶–ò–ö–õ</div>
                <div id="timeDisplay" class="stat-value">–î–ï–ù–¨ 08:00</div>
            </div>
        </div>
    </div>

    <div class="main">
        <!-- –°–ï–†–¨–ï–ó–ù–ê–Ø –°–ï–ö–¶–ò–Ø –°–û–°–¢–û–Ø–ù–ò–Ø –°–ò–°–¢–ï–ú–´ -->
        <div class="panel">
            <div class="panel-title">
                <span>–°–ò–°–¢–ï–ú–ù–´–ô –°–¢–ê–¢–£–°</span>
                <span class="collapse-icon">‚ñº</span>
            </div>
            <div class="panel-content">
                <div class="system-status">
                    <div class="status-line">
                        <div class="status-label">–¢–≠–¶:</div>
                        <div class="status-value" id="coalStatus">–û–§–§–õ–ê–ô–ù</div>
                        <div class="status-indicator offline"></div>
                    </div>
                    <div class="status-line">
                        <div class="status-label">–ò–°–ö–£–°–°–¢–í–ï–ù–ù–´–ô –ò–ù–¢–ï–õ–õ–ï–ö–¢:</div>
                        <div class="status-value" id="aiStatusText">–ù–ï–ê–ö–¢–ò–í–ï–ù</div>
                        <div class="status-indicator offline"></div>
                    </div>
                    <!-- –î–û–ë–ê–í–õ–ï–ù–ê –ó–ê–©–ò–¢–ê -->
                    <div class="status-line">
                        <div class="status-label">–°–ò–°–¢–ï–ú–ê –ó–ê–©–ò–¢–´:</div>
                        <div class="status-value" id="defenseStatusText">–ù–ï–ê–ö–¢–ò–í–ù–ê</div>
                        <div class="status-indicator offline"></div>
                    </div>
                    <div class="status-line">
                        <div class="status-label">–£–ì–†–û–ó–ê –ü–û–í–°–¢–ê–ù–¶–ï–í:</div>
                        <div class="status-value" id="rebelStatus">–ù–ò–ó–ö–ò–ô –£–†–û–í–ï–ù–¨</div>
                        <div class="threat-level low"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mining-action">
            <button id="mineBtn" class="btn pulse">–ò–ù–ò–¶–ò–ò–†–û–í–ê–¢–¨ –î–û–ë–´–ß–£ <span id="miningBonus">+0%</span></button>
            
            <!-- –°–ò–°–¢–ï–ú–ê –ö–õ–ò–ö–û–í -->
            <div class="click-system">
                <!-- –ú–æ—â–Ω–æ—Å—Ç—å -->
                <div class="power-section">
                    <div class="power-label">
                        <span>–í–´–ß–ò–°–õ–ò–¢–ï–õ–¨–ù–ê–Ø –ú–û–©–ù–û–°–¢–¨:</span>
                        <span id="powerText">0/100</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-fill" id="powerFill" style="width: 0%"></div>
                    </div>
                </div>
                
                <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –∫–ª–∏–∫–æ–≤ -->
                <div class="click-progress-section">
                    <div class="click-label">
                        <span>–ü–†–û–ì–†–ï–°–° –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò:</span>
                        <span id="clickProgressText">0/10</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-fill click-progress" id="clickProgress" style="width: 0%"></div>
                    </div>
                </div>
                
                <!-- –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–∫–ª–∏–∫–æ–≤ -->
                <div class="auto-click-section">
                    <div class="auto-click-status">
                        <span>–ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –î–û–ë–´–ß–ê:</span>
                        <span id="autoClickStatus">–û–¢–ö–õ–Æ–ß–ï–ù–ê</span>
                    </div>
                    <div class="auto-click-settings">
                        <span class="setting-icon">‚ö°</span>
                        <span class="setting-label">–ú–û–©–ù–û–°–¢–¨/–¶–ò–ö–õ:</span>
                        <span id="powerPerClick" class="setting-value">1</span>
                        
                        <span class="setting-separator">|</span>
                        
                        <span class="setting-icon">‚è±Ô∏è</span>
                        <span class="setting-label">–ò–ù–¢–ï–†–í–ê–õ:</span>
                        <span id="autoClickInterval" class="setting-value">5</span>
                        <span class="setting-unit">–°–ï–ö</span>
                        
                        <span class="setting-separator">|</span>
                        
                        <span class="setting-icon">üíé</span>
                        <span class="setting-label">–°–¢–û–ò–ú–û–°–¢–¨:</span>
                        <span id="autoClickCost" class="setting-value">1</span>
                        <span class="setting-unit">–ú–û–©–ù</span>
                    </div>
                    <div class="auto-click-info">
                        –£–î–ï–†–ñ–ò–í–ê–ô–¢–ï –î–õ–Ø –ê–ö–¢–ò–í–ê–¶–ò–ò –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ô –î–û–ë–´–ß–ò
                    </div>
                </div>
            </div>
        </div>
        
        <div class="panel">
            <div class="panel-title">
                <span>–°–ò–°–¢–ï–ú–ù–´–ô –ñ–£–†–ù–ê–õ</span>
                <span class="collapse-icon">‚ñº</span>
            </div>
            <div class="panel-content">
                <div class="log-controls">
                    <button id="clearLogBtn" class="log-btn">–û–ß–ò–°–¢–ò–¢–¨</button>
                    <button id="autoScrollBtn" class="log-btn">–ê–í–¢–û–°–ö–†–û–õ–õ</button>
                </div>
                <div id="logBox" style="height: 200px; overflow-y: auto;"></div>
            </div>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="inventory">–ò–ù–í–ï–ù–¢–ê–†–¨</div>
            <div class="tab" data-tab="upgrades">–ú–û–î–£–õ–ò</div>
            <div class="tab" data-tab="trade">–¢–û–†–ì–û–í–õ–Ø</div>
            <div class="tab" data-tab="quests">–ó–ê–î–ê–ù–ò–Ø</div>
        </div>
        
        <div class="tab-content active" id="inventory-tab">
            <div class="panel">
                <div class="panel-title">
                    <span>–°–ò–°–¢–ï–ú–ù–´–ï –†–ï–°–£–†–°–´</span>
                    <span class="collapse-icon">‚ñº</span>
                </div>
                <div class="panel-content">
                    <!-- –¢–û–õ–¨–ö–û –û–î–ò–ù –ö–û–ù–¢–ï–ô–ù–ï–† –î–õ–Ø –í–°–ï–• –Ø–ß–ï–ô–ö -->
                    <div class="inventory-grid" id="resourcesContainer">
                        <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –í–°–ï —è—á–µ–π–∫–∏ –≤–∫–ª—é—á–∞—è —Ç–µ–Ω–≥–µ -->
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="upgrades-tab">
            <div class="panel">
                <div class="panel-title">
                    <span>–°–ò–°–¢–ï–ú–ù–´–ï –ú–û–î–£–õ–ò</span>
                    <span class="collapse-icon">‚ñº</span>
                </div>
                <div class="panel-content">
                    <div class="upgrade-container">
                        <div class="upgrade-card">
                            <div class="upgrade-header">
                                <div class="upgrade-title">–≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–¨ –î–û–ë–´–ß–ò</div>
                                <div class="upgrade-level">–£–†. <span id="miningLevel">0</span>/10</div>
                            </div>
                            <div class="progress-container">
                                <div class="progress-fill" id="miningProgress" style="width: 0%"></div>
                            </div>
                            
                            <div class="upgrade-requirements">
                                <div class="requirement">
                                    <div class="requirement-name">
                                        <div class="requirement-icon">üéõÔ∏è</div>
                                        <span>–ú–ò–ö–†–û–°–•–ï–ú–´:</span>
                                    </div>
                                    <div class="requirement-value" id="miningChipsReq">0/5</div>
                                </div>
                            </div>
                            
                            <div class="upgrade-cost">
                                <button id="upgradeMiningBtn" class="upgrade-btn">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨</button>
                            </div>
                        </div>
                        
                        <div class="upgrade-card">
                            <div class="upgrade-header">
                                <div class="upgrade-title">–°–ò–°–¢–ï–ú–ê –ó–ê–©–ò–¢–´</div>
                                <div class="upgrade-level" id="defenseStatus">–ù–ï–ê–ö–¢–ò–í–ù–û</div>
                            </div>
                            <div class="progress-container">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            
                            <div class="upgrade-requirements">
                                <div class="requirement">
                                    <div class="requirement-name">
                                        <div class="requirement-icon">‚ö°</div>
                                        <span>–ü–õ–ê–ó–ú–ê:</span>
                                    </div>
                                    <div class="requirement-value" id="defensePlasmaReq">0/3</div>
                                </div>
                            </div>
                            
                            <div class="upgrade-cost">
                                <button id="upgradeDefenseBtn" class="upgrade-btn">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨</button>
                            </div>
                        </div>
                        
                        <div class="upgrade-card">
                            <div class="upgrade-header">
                                <div class="upgrade-title">–£–°–ò–õ–ï–ù–ò–ï –ó–ê–©–ò–¢–´</div>
                                <div class="upgrade-level" id="defenseLevel">–£–†. 0/5</div>
                            </div>
                            <div class="progress-container">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            
                            <div class="upgrade-requirements">
                                <div class="requirement">
                                    <div class="requirement-name">
                                        <div class="requirement-icon">üéõÔ∏è</div>
                                        <span>–ú–ò–ö–†–û–°–•–ï–ú–´:</span>
                                    </div>
                                    <div class="requirement-value" id="defenseChipsReq">0/10</div>
                                </div>
                                <div class="requirement">
                                    <div class="requirement-name">
                                        <div class="requirement-icon">‚ö°</div>
                                        <span>–ü–õ–ê–ó–ú–ê:</span>
                                    </div>
                                    <div class="requirement-value" id="defensePlasmaLevelReq">0/1</div>
                                </div>
                            </div>
                            
                            <div class="upgrade-cost">
                                <button id="upgradeDefenseLevelBtn" class="upgrade-btn">–£–°–ò–õ–ò–¢–¨</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="trade-tab">
            <div class="panel">
                <div class="panel-title">
                    <span>–¢–û–†–ì–û–í–´–ô –¢–ï–†–ú–ò–ù–ê–õ</span>
                    <span class="collapse-icon">‚ñº</span>
                </div>
                <div class="panel-content">
                    <div class="trade-container">
                        <div class="trade-mode-toggle">
                            <button id="buyModeBtn" class="trade-mode-btn active">–ó–ê–ö–£–ü–ö–ê</button>
                            <button id="sellModeBtn" class="trade-mode-btn">–ü–†–û–î–ê–ñ–ê</button>
                        </div>
                        
                        <div id="buyItemsContainer" class="trade-items-grid">
                            <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ Rust -->
                        </div>
                        
                        <div id="sellItemsContainer" class="trade-items-grid" style="display: none;">
                            <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ Rust -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="quests-tab">
            <div class="panel">
                <div class="panel-title">
                    <span>–°–ò–°–¢–ï–ú–ù–´–ï –ó–ê–î–ê–ß–ò</span>
                    <span class="collapse-icon">‚ñº</span>
                </div>
                <div class="panel-content">
                    <div class="quest-container" id="questsContainer"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –¥–æ–±—ã—á–∏ -->
    <div id="floatingMineBtn" class="floating-mine-btn">
        <span class="btn-icon">‚öôÔ∏è</span>
        <span class="btn-text">–î–û–ë–´–ß–ê</span>
        <span id="miningBonusFloat" class="mining-bonus">+0%</span>
    </div>
</div>

<script type="module">
  import init from './pkg/corebox_rs.js';
  
  console.log('–ó–∞–≥—Ä—É–∂–∞–µ–º WASM...');
  await init();
  console.log('WASM –∑–∞–≥—Ä—É–∂–µ–Ω!');
  
  // –ü—Ä–æ–≤–µ—Ä–∏–º —á—Ç–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ import
  import * as wasm from './pkg/corebox_rs.js';
  console.log('WASM –º–æ–¥—É–ª—å:', wasm);
  
  // –°–æ—Ö—Ä–∞–Ω–∏–º –º–æ–¥—É–ª—å –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
  window.wasmModule = wasm;
</script>

<script>
// –û–°–ù–û–í–ù–û–ô –°–ö–†–ò–ü–¢ –ò–ì–†–´
document.getElementById('authForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const username = document.getElementById('username').value;
    
    // –°–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–≥—Ä—É
    document.getElementById('authOverlay').style.display = 'none';
    document.getElementById('gameContent').style.display = 'block';
    document.getElementById('usernameDisplay').textContent = username;
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–≥—Ä—É
    initializeGame(username);
});

function initializeGame(username) {
    console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –¥–ª—è:', username);
    
    // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    const testInventory = [
        { name: '–ú–∏–∫—Ä–æ—Å—Ö–µ–º—ã', amount: 5, icon: 'üéõÔ∏è', type: 'chips' },
        { name: '–ü–ª–∞–∑–º–∞', amount: 3, icon: '‚ö°', type: 'plasma' },
        { name: '–¢–µ–Ω–≥–µ', amount: 100, icon: '‚Ç∏', type: 'money' },
        { name: '–£–≥–æ–ª—å', amount: 10, icon: '‚õèÔ∏è', type: 'coal' },
        { name: '–î–∞–Ω–Ω—ã–µ', amount: 25, icon: 'üíæ', type: 'data' }
    ];
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
    window.gameState = {
        username: username,
        inventory: testInventory,
        power: 0,
        clicks: 0,
        lastUpdate: Date.now()
    };
    
    // –ó–∞–ø–æ–ª–Ω—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    updateInventory();
    startGameTimer();
    startGameLoop();
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–≥
    addLogMessage('–°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
    addLogMessage('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ CoreBox 3.0, ' + username);
}

function updateInventory() {
    const container = document.getElementById('resourcesContainer');
    const inventory = window.gameState.inventory;
    
    container.innerHTML = inventory.map(item => `
        <div class="inventory-item" data-type="${item.type}">
            <div class="item-icon">${item.icon}</div>
            <div class="item-name">${item.name}</div>
            <div class="item-amount">${item.amount}</div>
        </div>
    `).join('');
}

function startGameTimer() {
    setInterval(updateTime, 60000);
    updateTime();
}

function updateTime() {
    const now = new Date();
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    document.getElementById('timeDisplay').textContent = `–î–ï–ù–¨ ${hours}:${minutes}`;
}

function startGameLoop() {
    setInterval(() => {
        updateProgressBars();
        updateAutoMining();
    }, 1000);
}

function updateProgressBars() {
    const state = window.gameState;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –º–æ—â–Ω–æ—Å—Ç—å
    state.power = Math.min(100, state.power + 0.5);
    document.getElementById('powerFill').style.width = state.power + '%';
    document.getElementById('powerText').textContent = Math.floor(state.power) + '/100';
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–ª–∏–∫–æ–≤
    const clickProgress = (state.clicks % 10) * 10;
    document.getElementById('clickProgress').style.width = clickProgress + '%';
    document.getElementById('clickProgressText').textContent = (state.clicks % 10) + '/10';
}

function updateAutoMining() {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–±—ã—á–∞ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
    const now = Date.now();
    if (now - window.gameState.lastUpdate > 5000) {
        mineResources();
        window.gameState.lastUpdate = now;
    }
}

function mineResources() {
    const state = window.gameState;
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ—Å—É—Ä—Å—ã
    state.inventory.forEach(item => {
        if (item.type !== 'money') {
            item.amount += Math.floor(Math.random() * 2);
        }
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º –¥–µ–Ω—å–≥–∏
    const moneyItem = state.inventory.find(item => item.type === 'money');
    if (moneyItem) {
        moneyItem.amount += Math.floor(Math.random() * 3) + 1;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
    updateInventory();
    state.clicks++;
    
    addLogMessage('–î–æ–±—ã—á–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ +' + (Math.floor(Math.random() * 2) + 1) + ' —Ä–µ—Å—É—Ä—Å–æ–≤');
}

// –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô
document.getElementById('mineBtn').addEventListener('click', function() {
    mineResources();
    addLogMessage('–†—É—á–Ω–∞—è –¥–æ–±—ã—á–∞ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∞');
});

document.getElementById('logoutBtn').addEventListener('click', function() {
    document.getElementById('gameContent').style.display = 'none';
    document.getElementById('authOverlay').style.display = 'flex';
    addLogMessage('–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã');
});

document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', function() {
        const tabName = this.getAttribute('data-tab');
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        this.classList.add('active');
        document.getElementById(`${tabName}-tab`).classList.add('active');
    });
});

// –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–æ–≤
function addLogMessage(message) {
    const logBox = document.getElementById('logBox');
    const timestamp = new Date().toLocaleTimeString();
    const logEntry = document.createElement('div');
    logEntry.textContent = `[${timestamp}] ${message}`;
    logEntry.style.padding = '2px 0';
    logEntry.style.borderBottom = '1px solid #333';
    logBox.appendChild(logEntry);
    logBox.scrollTop = logBox.scrollHeight;
}

document.getElementById('clearLogBtn').addEventListener('click', function() {
    document.getElementById('logBox').innerHTML = '';
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π
document.getElementById('upgradeMiningBtn').addEventListener('click', function() {
    const chips = window.gameState.inventory.find(item => item.type === 'chips');
    if (chips && chips.amount >= 5) {
        chips.amount -= 5;
        document.getElementById('miningLevel').textContent = '1';
        addLogMessage('–£–ª—É—á—à–µ–Ω–∏–µ –¥–æ–±—ã—á–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ!');
        updateInventory();
    } else {
        addLogMessage('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–∏–∫—Ä–æ—Å—Ö–µ–º –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è');
    }
});
</script>
</body>
</html>